/*
 * @license DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS HEADER.
 *
 * Copyright (c) 2009 Sun Microsystems Inc. All Rights Reserved
 *
 * The contents of this file are subject to the terms
 * of the Common Development and Distribution License
 * (the License). You may not use this file except in
 * compliance with the License.
 *
 * You can obtain a copy of the License at
 * https://opensso.dev.java.net/public/CDDLv1.0.html or
 * opensso/legal/CDDLv1.0.txt
 * See the License for the specific language governing
 * permission and limitations under the License.
 *
 * When distributing Covered Code, include this CDDL
 * Header Notice in each file and include the License file
 * at opensso/legal/CDDLv1.0.txt.
 * If applicable, add the following below the CDDL Header,
 * with the fields enclosed by brackets [] replaced by
 * your own identifying information:
 * "Portions Copyrighted [year] [name of copyright owner]"
 *
 */
define("org/forgerock/libwrappers/JQueryWrapper",["requirejs/order/1.0.5/order-1.0.5-min!org/codehaus/mojo/jquery-amd/1.7.1-SNAPSHOT/jquery-amd-1.7.1-SNAPSHOT"],function(a){return $}),define("org/forgerock/openam/extensions/authmodules/adaptivedeviceprint/AdaptiveDevicePrintView",["org/forgerock/libwrappers/JQueryWrapper"],function(a){var b={};return b.getLoginForm=function(){return a("[name=Login]")},b.getDevicePrintInfoInput=function(){return b.getLoginForm().find("[name=devicePrintInfo]").length||b.getLoginForm().append("<input name='devicePrintInfo' type='hidden' />"),b.getLoginForm().find("[name=devicePrintInfo]")},b}),define("org/forgerock/openam/extensions/authmodules/adaptivedeviceprint/DevicePrintInfoAggregator",["org/forgerock/libwrappers/JQueryWrapper"],function(a){var b={};return b.infoCollectorClasses=["org/forgerock/openam/extensions/authmodules/adaptivedeviceprint/infocollectors/ScreenInfoCollector","org/forgerock/openam/extensions/authmodules/adaptivedeviceprint/infocollectors/TimezoneCollector","org/forgerock/openam/extensions/authmodules/adaptivedeviceprint/infocollectors/BrowserPluginsCollector","org/forgerock/openam/extensions/authmodules/adaptivedeviceprint/infocollectors/GeolocationCollector"],b.collectInfo=function(){var c,d,e={},f;for(c=0;c<b.infoCollectorClasses.length;c++)f=require(b.infoCollectorClasses[c]).gatherInformation(),f&&a.extend(e,f);return e},b}),define("org/forgerock/openam/extensions/authmodules/adaptivedeviceprint/Constants",[],function(){var a={};return a.EVENT_RECOLLECT_DATA="adaptivedeviceprint.recollect_data",a.adaptiveDevicePrintCookieName="AdaptiveDevicePrintCookie",a}),define("org/forgerock/openam/extensions/authmodules/adaptivedeviceprint/EventManager",["org/forgerock/openam/extensions/authmodules/adaptivedeviceprint/Constants","org/forgerock/libwrappers/JQueryWrapper"],function(a,b){var c={},d=[];return c.sendEvent=function(a,c){console.debug("sending event eventId="+a),b(document).trigger(a,c)},c.registerListener=function(a,c){var e=function(a,b){console.debug("Handiling event"),c(b)};console.debug("registering event listener eventId="+a),d[c]=e,b(document).on(a,e)},c.unregisterListener=function(a,c){var e;console.debug("unregistering event listener eventId="+a),e=d[c],b(document).off(e)},c}),define("org/forgerock/openam/extensions/authmodules/adaptivedeviceprint/AdaptiveDevicePrintCtrl",["org/forgerock/openam/extensions/authmodules/adaptivedeviceprint/AdaptiveDevicePrintView","org/forgerock/openam/extensions/authmodules/adaptivedeviceprint/DevicePrintInfoAggregator","org/forgerock/openam/extensions/authmodules/adaptivedeviceprint/EventManager","org/forgerock/openam/extensions/authmodules/adaptivedeviceprint/Constants"],function(a,b,c,d){var e={};return e.view=a,e.init=function(){e.fillInputWithDevicePrintInfo(),c.registerListener(d.EVENT_RECOLLECT_DATA,e.fillInputWithDevicePrintInfo)},e.fillInputWithDevicePrintInfo=function(){e.view.getLoginForm().size()===0&&setTimeout(e.fillInputWithDevicePrintInfo,100);var a=b.collectInfo();console.log("collected info: "+a),e.view.getDevicePrintInfoInput().val(JSON.stringify(a))},e}),define("org/forgerock/openam/extensions/authmodules/adaptivedeviceprint/AbstractDevicePrintInfoCollector",[],function(){var a=function(){};return a.prototype.gatherInformation=function(){},a}),define("org/forgerock/openam/extensions/authmodules/adaptivedeviceprint/infocollectors/BrowserPluginsCollector",["org/forgerock/openam/extensions/authmodules/adaptivedeviceprint/AbstractDevicePrintInfoCollector"],function(a){var b=new a;return b.gatherInformation=function(){if(navigator&&navigator.plugins){var a={},b=navigator.plugins,c;a.installedPlugins="";for(c=0;c<b.length;c++)a.installedPlugins=a.installedPlugins+b[c].filename+";";return a.installedPlugins=a.installedPlugins.substr(0,a.installedPlugins.length-1),a}return console.error("BrowserPluginsCollector: navigator.plugins not defined"),null},b}),define("org/forgerock/openam/extensions/authmodules/adaptivedeviceprint/infocollectors/ScreenInfoCollector",["org/forgerock/openam/extensions/authmodules/adaptivedeviceprint/AbstractDevicePrintInfoCollector"],function(a){var b=new a,c;return b.gatherInformation=function(){var a={};return screen?(screen.width&&(a.screenWidth=screen.width),screen.height&&(a.screenHeight=screen.height),screen.pixelDepth&&(a.screenColorDepth=screen.pixelDepth),a):(console.error("ScreenInfoCollector: screen not defined"),null)},b}),define("org/forgerock/openam/extensions/authmodules/adaptivedeviceprint/infocollectors/TimezoneCollector",["org/forgerock/openam/extensions/authmodules/adaptivedeviceprint/AbstractDevicePrintInfoCollector"],function(a){var b=new a;return b.gatherInformation=function(){var a={},b=(new Date).getTimezoneOffset();return b?(a.timezone=b,a):(console.error("TimezoneCollector: timezone not defined"),null)},b}),define("org/forgerock/openam/extensions/authmodules/adaptivedeviceprint/infocollectors/GeolocationCollector",["org/forgerock/openam/extensions/authmodules/adaptivedeviceprint/AbstractDevicePrintInfoCollector","org/forgerock/openam/extensions/authmodules/adaptivedeviceprint/EventManager","org/forgerock/openam/extensions/authmodules/adaptivedeviceprint/Constants"],function(a,b,c){var d=new a,e;return d.gatherInformation=function(){if(d.position){var a={},b;return a.longitude=d.position.coords.longitude,a.latitude=d.position.coords.latitude,a}return console.log("GeolocationCollector: geolocation not readed"),null},d.getPosition=function(){if(navigator&&navigator.geolocation)navigator.geolocation.getCurrentPosition(function(a){d.position=a,console.log("GeolocationCollector: geolocation readed"),b.sendEvent(c.EVENT_RECOLLECT_DATA)});else return console.error("GeolocationCollector: navigator.geolocation not defined"),null},d.getPosition(),d}),define("org/forgerock/openam/extensions/authmodules/adaptivedeviceprint/infocollectors/main",["./BrowserPluginsCollector","./ScreenInfoCollector","./TimezoneCollector","./GeolocationCollector"]),require(["org/forgerock/openam/extensions/authmodules/adaptivedeviceprint/AdaptiveDevicePrintCtrl","org/forgerock/openam/extensions/authmodules/adaptivedeviceprint/infocollectors/main"],function(a){a.init()}),define("main",function(){})