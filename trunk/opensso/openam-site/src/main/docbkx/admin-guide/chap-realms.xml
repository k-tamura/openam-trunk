<?xml version="1.0" encoding="UTF-8"?>
<!--
  ! CCPL HEADER START
  !
  ! This work is licensed under the Creative Commons
  ! Attribution-NonCommercial-NoDerivs 3.0 Unported License.
  ! To view a copy of this license, visit
  ! http://creativecommons.org/licenses/by-nc-nd/3.0/
  ! or send a letter to Creative Commons, 444 Castro Street,
  ! Suite 900, Mountain View, California, 94041, USA.
  !
  ! You can also obtain a copy of the license at
  ! src/main/resources/legal-notices/CC-BY-NC-ND.txt.
  ! See the License for the specific language governing permissions
  ! and limitations under the License.
  !
  ! If applicable, add the following below this CCPL HEADER, with the fields
  ! enclosed by brackets "[]" replaced with your own identifying information:
  !      Portions Copyright [yyyy] [name of copyright owner]
  !
  ! CCPL HEADER END
  !
  !      Copyright 2011 ForgeRock AS
  !    
-->
<chapter xml:id='chap-realms'
 xmlns='http://docbook.org/ns/docbook'
 version='5.0' xml:lang='en'
 xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance'
 xsi:schemaLocation='http://docbook.org/ns/docbook http://docbook.org/xml/5.0/xsd/docbook.xsd'
 xmlns:xlink='http://www.w3.org/1999/xlink'
 xmlns:xinclude='http://www.w3.org/2001/XInclude'>
 <title>Configuring Realms</title>
 
 <indexterm><primary>Realms</primary></indexterm>
 <para>This chapter shows how to configure OpenAM <firstterm>realms</firstterm>,
 which are used to group configuration and identities together.</para>
 
 <para>OpenAM associates a realm with at least one identity repository and
 authentication process. OpenAM also associates the realm with authorization
 policies and entitlements for users, and privileges for administrators. Each
 realm can have its own configuration for services.</para>
 
 <para>When you first configure OpenAM, OpenAM sets up the default
 <literal>/ (Top Level Realm)</literal>, containing OpenAM configuration
 data, and allowing authentication using the identity repository you choose
 during initial configuration. The top level realm might hold the overall
 configuration for Example.com for instance.</para>
 
 <para>You create new realms to subdivide authentication, and authorization,
 and to delegate management of sub-realms. For example, your organization
 might require separate realms for payroll, human resources, and IT management
 domains and their applications.</para>
 
 <procedure xml:id="create-new-realm">
  <title>To Create a New Realm</title>
  <indexterm><primary>Create realms</primary></indexterm>
  
  <para>You can create a new realm through the OpenAM console as described
  below, or by using the <command>ssoadm create-realm</command> command.</para>
  
  <step>
   <para>Login to the OpenAM console as OpenAM Administrator,
   <literal>amadmin</literal>.</para>
  </step>
  <step>
   <para>On the Access Control tab &gt; Realms table, click New... to open
   the New Realm page, where you configure the realm.</para>
   <para>If you configure the realm to be inactive, then users cannot use
   it to authenticate or be granted access to protected resources.</para>
   <para>Realm/DNS aliases must be meaningful in DNS terms, such as
   <literal>.hr.example.com</literal> or
   <literal>pay.example.com</literal>.</para>
  </step>
  <step>
   <para>Save your work after defining the configuration for the new realm.</para>
  </step>
 </procedure>
 
 <para>You configure a realm through the console starting from the Access
 Control tab &gt; Realms table. By default the new realm inherits configuration
 from the global configuration. The default identity repository is the one you
 choose when configuring OpenAM after deployment. The default authentication
 mechanism corresponds to that identity repository as well. You can, however,
 constrain authentication to rely on different data stores, and set policy
 for agents to define authorization in the realm.</para>
 
 <procedure>
  <title>To Delegate Administration</title>
  <indexterm><primary>Delegate administration</primary></indexterm>
  
  <para>You can delegate administration in a realm. OpenAM grants
  administrative capabilities to members of groups having administrative
  privileges.</para>
  
  <para>You can grant privileges through the OpenAM console as described
  below, or by using the <command>ssoadm add-privileges</command> command.</para>
  
  <step>
   <para>On the Access Control tab &gt; Realms table, click the realm
   for which you want to delegate administration to view the realm
   configuration.</para>
  </step>
  <step>
   <para>On the Privileges tab, click the name of the group to whom you
   intend to grant access.</para>
  </step>
  <step>
   <para>Select the administrative privileges to delegate for the realm,
   and then save your work.</para>
  </step>
 </procedure>
 
</chapter>
