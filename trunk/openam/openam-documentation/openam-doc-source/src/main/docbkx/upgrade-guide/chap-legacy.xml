<?xml version="1.0" encoding="UTF-8"?>
<!--
  ! CCPL HEADER START
  !
  ! This work is licensed under the Creative Commons
  ! Attribution-NonCommercial-NoDerivs 3.0 Unported License.
  ! To view a copy of this license, visit
  ! http://creativecommons.org/licenses/by-nc-nd/3.0/
  ! or send a letter to Creative Commons, 444 Castro Street,
  ! Suite 900, Mountain View, California, 94041, USA.
  !
  ! You can also obtain a copy of the license at
  ! src/main/resources/legal-notices/CC-BY-NC-ND.txt.
  ! See the License for the specific language governing permissions
  ! and limitations under the License.
  !
  ! If applicable, add the following below this CCPL HEADER, with the fields
  ! enclosed by brackets "[]" replaced with your own identifying information:
  !      Portions Copyright [yyyy] [name of copyright owner]
  !
  ! CCPL HEADER END
  !
  !      Copyright 2011-2013 ForgeRock, Inc.
  !    
-->
<chapter xml:id='chap-legacy'
 xmlns='http://docbook.org/ns/docbook'
 version='5.0' xml:lang='en'
 xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance'
 xsi:schemaLocation='http://docbook.org/ns/docbook http://docbook.org/xml/5.0/xsd/docbook.xsd'
 xmlns:xlink='http://www.w3.org/1999/xlink'
 xmlns:xinclude='http://www.w3.org/2001/XInclude'>
 <title>Migrating from a Legacy Deployment</title>
 <indexterm><primary>Legacy</primary></indexterm>

 <para>This chapter shows you how to migrate core services from deployments earlier
 than OpenAM 9.5 to a more current release. The following procedure includes some example 
 instructions for a Tomcat instance. Port numbers and directory names may be 
 different for your deployment.</para>
 
 <note>
  <para>Migrating a legacy deployment is not considered an upgrade. It requires
  the user to create an entirely new deployment from the original deployment and the
  latest version of OpenAM. ForgeRock recommends removing the old deployment and storing 
  it elsewhere before beginning.</para>
 </note>

 <note>
  <para>For complex legacy deployments, ForgeRock can assist you through the 
  upgrade process. Send mail to <link xlink:href="mailto:info@forgerock.com"
  >info@forgerock.com</link> for more information.</para>
 </note>
 
 <procedure xml:id="upgrade-legacy">
  <title>To Upgrade A Legacy Deployment</title>

  <step>
   <para>Backup your deployment.</para>
  </step>

  <step>
   <para>Download the new version of OpenAM from <link 
     xlink:show="new" xlink:href="http://forgerock.com/download-stack/"
     ><citetitle>Enterprise Downloads page</citetitle></link> or from the <link 
     xlink:show="new" xlink:href="http://forgerock.org/openam-archive.html"
     ><citetitle>Archives page</citetitle></link>.</para>
  </step>

  <step>
   <para>Apply customizations to the new <filename>.war</filename> file. The 
   <link xlink:href="upgrade-guide#appendix-best-practices" xlink:role="http://docbook.org/xlink/role/olink">
   <citetitle>Best Practices for Upgrading Your OpenAM Deployment</citetitle></link>
   provides steps if you would like to run through a customization checklist.</para>
  </step>
  
  <step>
   <para>Follow <link xlink:href="install-guide#chap-install-core" 
   xlink:role="http://docbook.org/xlink/role/olink">
   <citetitle>Installing OpenAM Core Services</citetitle></link> in the
   <citetitle>Installation Guide</citetitle> to complete the migration.</para>
  </step>

 </procedure>

 <para>Once you have completed the new installation, you can create and run a script 
 that will apply the configuration settings on the new system. You can use something
 like the ssoadm do-batch script to do this.</para>

</chapter>
