<?xml version="1.0" encoding="UTF-8"?>
<!--
  ! CCPL HEADER START
  !
  ! This work is licensed under the Creative Commons
  ! Attribution-NonCommercial-NoDerivs 3.0 Unported License.
  ! To view a copy of this license, visit
  ! http://creativecommons.org/licenses/by-nc-nd/3.0/
  ! or send a letter to Creative Commons, 444 Castro Street,
  ! Suite 900, Mountain View, California, 94041, USA.
  !
  ! You can also obtain a copy of the license at
  ! src/main/resources/legal-notices/CC-BY-NC-ND.txt.
  ! See the License for the specific language governing permissions
  ! and limitations under the License.
  !
  ! If applicable, add the following below this CCPL HEADER, with the fields
  ! enclosed by brackets "[]" replaced with your own identifying information:
  !      Portions Copyright [yyyy] [name of copyright owner]
  !
  ! CCPL HEADER END
  !
  !      Copyright 2011-2013 ForgeRock AS
  !    
-->
<chapter xml:id='chap-jdk'
 xmlns='http://docbook.org/ns/docbook'
 version='5.0' xml:lang='en'
 xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance'
 xsi:schemaLocation='http://docbook.org/ns/docbook http://docbook.org/xml/5.0/xsd/docbook.xsd'
 xmlns:xlink='http://www.w3.org/1999/xlink'
 xmlns:xinclude='http://www.w3.org/2001/XInclude'>
 <title>Using the OpenAM Java SDK</title>
 <indexterm>
  <primary>Installing</primary>
  <secondary>Java SDK</secondary>
 </indexterm>

 <para>This chapter introduces OpenAM Java SDK. OpenAM Java SDK is delivered
 with the full version of OpenAM,
 <filename><?eval ${coreDirectoryFile}?></filename>. For instructions on
 installing the OpenAM Java SDK, see <link
 xlink:href="install-guide#chap-install-samples"
 xlink:role="http://docbook.org/xlink/role/olink"><citetitle>Installing OpenAM
 Client SDK Samples</citetitle></link>.</para>
 
 <itemizedlist>
  <para>After installing the Java SDK command line samples, you see the
  following content.</para>

  <listitem>
   <para><filename>lib/</filename>: SDK and other libraries</para>
  </listitem>
  <listitem>
   <para><filename>resources/</filename>: properties configuration files for
   the SDK and samples</para>
  </listitem>
  <listitem>
   <para><filename>scripts/</filename>: scripts to run the samples</para>
  </listitem>
  <listitem>
   <para><filename>source/</filename>: sample code</para>
  </listitem>
 </itemizedlist>

 <para>After deploying the Java SDK web application archive, you find the
 following content where the .war file was unpacked.</para>

 <itemizedlist>
  <listitem>
   <para><filename>META-INF/</filename>: build information</para>
  </listitem>
  <listitem>
   <para><filename>WEB-INF/</filename>: sample classes and libraries</para>
  </listitem>
  <listitem>
   <para><filename>console/</filename>: images for sample UI</para>
  </listitem>
  <listitem>
   <para><filename>index.html</filename>: sample home page</para>
  </listitem>
  <listitem>
   <para><filename>keystore.jks</filename>: OpenAM test certificate, alias:
   <literal>test</literal>, key store password: <literal>changeit</literal></para>
  </listitem>
  <listitem>
   <para><filename>policy/</filename>: Policy Evaluator Client Sample page</para>
  </listitem>
  <listitem>
   <para><filename>saml2/</filename>: Secure Attribute Exchange example</para>
  </listitem>
  <listitem>
   <para><filename>sample.css</filename>: sample styles</para>
  </listitem>
  <listitem>
   <para><filename>sm/</filename>: Service Configuration sample</para>
  </listitem>
  <listitem>
   <para><filename>um/</filename>: User Profile sample</para>
  </listitem>
 </itemizedlist>

 <itemizedlist xml:id="jdk-shutdown-hooks">
   <title>Registering Your Java SDK Client to Shut Down Gracefully</title>

   <para>When writing a client using the OpenAM Java SDK, make sure you register
   hooks to make sure the application can be shut down gracefully. How you
   register for shutdown depends on the type of application.</para>

  <listitem>
   <para>For Java EE applications, make sure the OpenAM client SDK shuts down
   successfully by including the following context listener in your
   application's <filename>web.xml</filename> file.</para>

   <programlisting language="xml">&lt;listener&gt;
 &lt;listener-class&gt;
  com.sun.identity.common.ShutdownServletContextListener
 &lt;/listener-class&gt;
&lt;/listener&gt;</programlisting>
  </listitem>

  <listitem>
   <para>For standalone applications, set the following JVM property.</para>

   <literallayout class="monospaced"
   >-Dopenam.runtime.shutdown.hook.enabled=true</literallayout>
  </listitem>
 </itemizedlist>
</chapter>
