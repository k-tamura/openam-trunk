<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
 "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>

<!--

-->

<head>

  <meta http-equiv="Content-type" content="text/html; charset=utf-8">
  <!-- ident      "%Z%%M% %I%     %E% SMI" -->

  <title>ルールをポリシーに追加する - Sun OpenSSO 8.0 コンソールオンラインヘルプ
  </title>
  <script language="JavaScript1.2">
    linktag = window.parent.frames[0].document.getElementsByTagName('link');
    for (var i = 0; i < linktag.length; i++) {
        if (linktag[i].rel == "stylesheet") {
            var s = "<link rel=" + linktag[i].rel + " type='text/css' href=" + linktag[i].href + " />";
            document.write(s);
        }
    }
  </script>
  <meta name="Copyright" content="Copyright &copy; 2008 by Sun Microsystems, Inc. All Rights Reserved." />

</head>

<body class="HlpBdy">



<a name="policy.ruleadd"></a><h5>ルールをポリシーに追加する</h5>
<ol>
<li><b><a name="indexterm-25"></a>ポリシーを作成済みの場合、ルールを追加するポリシーの名前をクリックします。まだポリシーを作成していない場合は、<a href="policy.policynormaladd.html">「新しい標準ポリシーを作成する」</a>を参照してください。</b></li>
<li><b>「ルール」メニューの「新規」をクリックします。</b></li>
<li><b>次のデフォルトのサービスタイプから、ルールに使用するものを 1 つ選択します。ポリシーに対してより多くのサービスが有効になっている場合は、より大きいリストが表示されることがあります。</b><dl><dt>ディスカバリサービス</dt>
<dd><p>指定されたリソースについて Web サービスクライアントによりディスカバリサービスのクエリーおよび変更プロトコルが呼び出されたときの承認アクションを定義します。</p></dd>
<dt>Liberty 個人プロファイルサービス</dt>
<dd><p>指定されたリソースについて Web サービスクライアントにより Liberty 個人プロファイルサービスのクエリーおよび変更プロトコルが呼び出されたときの承認アクションを定義します。</p></dd>
<dt>URL ポリシーエージェント</dt>
<dd><p>URL ポリシーエージェントサービスの承認アクションを定義します。HTTP URL および HTTPS URL を保護するポリシーの定義に使用されます。これが、OpenSSO のポリシーのもっとも一般的な用途です。</p></dd>
</dl>
</li>
<li><b>「次へ」をクリックします。</b></li>
<li><b>ルールの名前とリソース名を入力します。</b><p>現在、OpenSSO ポリシーエージェントでは、<tt>http://</tt> と <tt>https://</tt> のリソースのみをサポートしています。また、ホスト名の代わりに IP アドレスを使用することはできません。</p><p>プロトコル、ホスト、ポート、およびリソース名にはワイルドカードを使用できます。次に例を示します。</p><pre>http*://*:*/*.html</pre><p>URL ポリシーエージェントサービスでは、ポート番号が入力されていない場合のデフォルトのポート番号は、<tt>http://</tt> では 80、<tt>https://</tt> では 443 となります。</p>
<hr><p><b>注 &#8211; </b>手順 6 と 7 は参照ポリシーには使用できません。</p>
<hr>
</li>
<li><b>ルールのアクションを選択します。サービスタイプに応じて、次の中から選択できます。</b>
<ul><li><p>検索 (ディスカバリサービス)</p></li>
<li><p>更新 (ディスカバリサービス)</p></li>
<li><p>変更 (Liberty 個人プロファイルサービス)</p></li>
<li><p>クエリー (Liberty 個人プロファイルサービス)</p></li>
<li><p>GET (URL ポリシーエージェント)</p></li>
<li><p>POST (URL ポリシーエージェント)</p></li></ul>
</li>
<li><b>アクションの値を選択します。</b>
<ul><li><p>同意のための対話 &#8212; リソースに関する同意を求める Liberty 対話プロトコルを呼び出します。これは、Liberty 個人プロファイルサービスタイプにのみ使用できます。</p></li>
<li><p>値のための対話 &#8212; リソースに関する値を求める Liberty 対話プロトコルを呼び出します。これは、Liberty 個人プロファイルサービスタイプにのみ使用できます。</p></li>
<li><p>許可 &#8212; ルールで定義されているリソースと一致するリソースへのアクセスを許可します。</p></li>
<li><p>拒否 &#8212; ルールで定義されているリソースと一致するリソースへのアクセスを拒否します。</p><p>ポリシーでは、常に拒否ルールが許可ルールより優先されます。たとえば、特定のリソースに関する 2 つのポリシーがあり、一方はアクセスを拒否し他方はアクセスを許可する場合、両方のポリシーとも条件が満たされているときは、結果としてアクセスは拒否されます。拒否ポリシーは、ポリシー間の競合を引き起こす可能性があるので、慎重に使用することをお勧めします。通常、ポリシー定義プロセスでは許可ルールだけを使用し、どのポリシーでも拒否のケースを実現できない場合にデフォルトの拒否を使用するようにしてください。</p><p>明示的な拒否ルールを使用すると、特定のユーザーにさまざまな対象 (ロールまたはグループのメンバーシップ、あるいはその両方など) を介して複数のポリシーが割り当てられている場合に、1 つ以上のポリシーでリソースへのアクセスが許可されても、結果としてアクセスが拒否されることがあります。たとえば、同一のリソースについて、Employee ロールに適用可能な拒否ポリシーと Manager ロールに適用可能な許可ポリシーがある場合、Employee ロールと Manager ロールの両方に割り当てられているユーザーに関するポリシー決定は拒否になります。</p><p>このような問題を解決する方法の 1 つは、条件プラグインを使用してポリシーを設計することです。上記の例では、Employee ロールに認証されたユーザーには拒否ポリシーを適用し、Manager ロールに認証されたユーザーには許可ポリシーを適用するという「ロール条件」を利用して、2 つのポリシーを区別できます。「認証レベル」条件を使用する別の方法も考えられます。この場合、「manager」ロールがより高い認証レベルで認証します。<tt></tt></p></li></ul>
</li>
<li><b>「完了」をクリックします。</b></li></ol>
<br/>

</body>
</html>
